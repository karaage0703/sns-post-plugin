# はてなブログ記事推薦ポスト生成

## 実行指示

以下の手順ではてなブログ記事推薦投稿を自動生成してください：

1. **ブログURL確認**
   - ブログURLが指定されていない場合は、**日本語で**ユーザーに問いかけて確認
   - 例: 「はてなブログのURLを教えてください（例: https://example.hatenadiary.jp）」
   - デフォルトを提示し、「そのままでよければ「OK」と入力してください」と案内
   - ユーザーがURLを指定すれば、そのURLを使用
   - 「OK」と入力されればデフォルト値を使用
   - デフォルト: https://karaage.hatenadiary.jp

2. **収集期間確認**
   - 収集開始年が指定されていない場合は、**日本語で**ユーザーに問いかけて確認
   - まず `date +%Y` で現在の年を取得
   - デフォルトは「現在の年 - 1」（1年前から）
   - 例: 2025年なら、「何年からの記事を収集しますか？（デフォルト: 2024年から）」
   - デフォルトを提示し、「そのままでよければ「OK」と入力してください」と案内
   - ユーザーが年を指定すれば、その年を使用
   - 「OK」と入力されればデフォルト値を使用

3. **記事取得**
   - MCPツール `fetch_hatena_articles` を使用
   - blog_url: 手順1で確認したURL
   - start_year: 手順2で確認した年
   - use_cache: true（2回目以降は高速）

4. **投稿文生成**
   - 取得した記事情報を元に、以下のルールに従って投稿文を生成
   - 文字数チェック（195文字以下を目指す）

5. **ファイル保存**
   - カレントディレクトリに `YYYYMMDD_hatena_記事ID.md` として保存

**パフォーマンス注意**:
- 初回実行時は記事収集に時間がかかります（30秒〜1分程度）
- 2回目以降はキャッシュが効くため数秒で完了します
- 1年分（デフォルト）で約50〜150記事を収集（ブログによって異なる）
- より古い記事が必要な場合は、start_yearを小さい値に設定

---

## 目的

任意のはてなブログから過去の記事を発掘し、X（Twitter）向けの推薦投稿文を生成する。古い記事も含めて、今でも価値のある内容を再発見してもらう。

## 投稿文フォーマット

以下の3つのパターンから、記事の内容に最も適したものを選択：

### パターン1: 過去の技術記事発掘向け
```
🏺 ブログアーカイブ発掘

【{公開年}年の記事】{タイトル（短縮可）}

⏰ {何年前}に書かれた記事ですが...
💡 {今でも使える/参考になるポイント}

{ハッシュタグ 3-4個}
{記事URL}
```

### パターン2: タイムレスな技術Tips向け
```
📚 過去記事から掘り出し物

時を超えて役立つTips発見！

【タイトル（短縮可）】
✨ {記事の核心的な内容を1-2行で}

{ハッシュタグ 3-4個}
{記事URL}
```

### パターン3: 懐かしのイベント・体験記向け
```
🕰️ タイムマシン記事

{何年前}のあの日の記録

【タイトル（短縮可）】
📸 {当時の状況や学びを1-2行で}

{ハッシュタグ 3-4個}
{記事URL}
```

## 紹介文作成のガイドライン

1. **簡潔さを重視**
   - 冗長な表現を避ける
   - 記事の核心を1-2文で表現
   - 発掘の価値を端的に示す

2. **読者の興味を引く表現**
   - なぜ今この記事を読む価値があるのか
   - 時間が経っても色褪せない理由を強調
   - 具体的な技術名やツール名を含める

3. **適切なハッシュタグ**
   - 記事の内容に直接関連するもの3-4個
   - #ブログ発掘 #アーカイブ なども活用
   - 長いハッシュタグは避ける

## 文字数とレイアウト

- 全体で195文字以下を目指す（URLとハッシュタグ含む）
- タイトルが長い場合は積極的に短縮
- 改行も文字数にカウントされる（X投稿時）
- wcコマンドで必ず確認すること

## 制約事項

- 全体で280文字以内に収める
- 絵文字は控えめに使用（各パターンの冒頭程度）
- 古い記事であることを明示する
- 過度な宣伝表現は避ける

## ファイル保存規則

生成した投稿文は以下の形式で保存：

- ファイル名: `YYYYMMDD_hatena_記事ID.md`
  - 記事IDは記事URLの末尾部分（例: `20180412073000`）
  - 例: `20250726_hatena_20180412073000.md`
- 保存先: カレントディレクトリ
- 日付は生成日（`date +%Y%m%d`で取得）
- 内容には投稿文本文と選択した記事情報を含める

### ファイル内容の例

```markdown
# はてなブログ記事推薦投稿 - 2025/10/15

## 投稿文

🏺 ブログアーカイブ発掘

【2024年の記事】Google Colaboratoryを便利に使うためのTIPS

⏰ 1年前に書かれた記事ですが...
💡 Colabの基本的な使い方は今でも有効

#GoogleColab #機械学習 #ブログ発掘 #Tips
https://example.hatenadiary.jp/entry/2024/05/17/073000

## 記事情報
- ブログURL: https://example.hatenadiary.jp
- タイトル: Google Colaboratoryを便利に使うためのTIPSまとめ
- 記事URL: https://example.hatenadiary.jp/entry/2024/05/17/073000
- はてなブックマーク数: 42
- 記事ID: 20240517073000
- 収集期間: 2024年から（1年分）
- 発掘理由: 無料GPU環境の活用法として現在も参考になる基本的なTipsが網羅されている

## 文字数
- 投稿文: XXX文字（目標195文字以下）
```
